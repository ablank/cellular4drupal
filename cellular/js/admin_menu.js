!function($){Drupal.admin=Drupal.admin||{},Drupal.admin.behaviors=Drupal.admin.behaviors||{},Drupal.admin.hashes=Drupal.admin.hashes||{},Drupal.behaviors.adminMenu={attach:function(a,n){var e;n.admin_menu=$.extend({suppress:!1,margin_top:!1,position_fixed:!1,tweak_modules:!1,tweak_permissions:!1,tweak_tabs:!1,destination:"",basePath:n.basePath,hash:0,replacements:{}},n.admin_menu||{}),n.admin_menu.suppress||(!(e=$("#admin-menu:not(.admin-menu-processed)",a)).length&&n.admin_menu.hash?Drupal.admin.getCache(n.admin_menu.hash,function(e){"string"==typeof e&&0<e.length&&$("body",a).append(e);e=$("#admin-menu:not(.admin-menu-processed)",a);Drupal.admin.attachBehaviors(a,n,e),$(window).triggerHandler("resize")}):Drupal.admin.attachBehaviors(a,n,e))}},Drupal.behaviors.adminMenuCollapseModules={attach:function(e,a){a.admin_menu.tweak_modules&&$("#system-modules fieldset:not(.collapsed)",e).addClass("collapsed")}},Drupal.behaviors.adminMenuCollapsePermissions={attach:function(e,a){a.admin_menu.tweak_permissions&&($("#permissions th:first",e).css({width:$("#permissions th:first",e).width()}),$modules=$("#permissions tr:has(td.module)",e).once("admin-menu-tweak-permissions",function(){var e=$(this);e.bind("click.admin-menu",function(){e.nextAll().each(function(){var e=$(this);if(e.is(":has(td.module)"))return!1;e.toggleClass("element-hidden")})})}),($modules=window.location.hash.length?$modules.not(":has("+window.location.hash+")"):$modules).trigger("click.admin-menu"))}},Drupal.behaviors.adminMenuMarginTop={attach:function(e,a){!a.admin_menu.suppress&&a.admin_menu.margin_top&&$("body:not(.admin-menu)",e).addClass("admin-menu")}},Drupal.admin.getCache=function(e,a){if(void 0!==Drupal.admin.hashes.hash)return Drupal.admin.hashes.hash;$.ajax({cache:!0,type:"GET",dataType:"text",global:!1,url:Drupal.settings.admin_menu.basePath.replace(/admin_menu/,"js/admin_menu/cache/"+e),success:a,complete:function(e,a){Drupal.admin.hashes.hash=a}})},Drupal.admin.height=function(){var e=$("#admin-menu"),a=e.outerHeight();return e.css("filter")&&e.css("filter").match(/DXImageTransform\.Microsoft\.Shadow/)&&(a-=e.get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength),a},Drupal.admin.attachBehaviors=function(e,a,n){n.length&&(n.addClass("admin-menu-processed"),$.each(Drupal.admin.behaviors,function(){this(e,a,n)}))},Drupal.admin.behaviors.positionFixed=function(e,a,n){a.admin_menu.position_fixed&&(n.addClass("admin-menu-position-fixed"),n.css("position","fixed"))},Drupal.admin.behaviors.pageTabs=function(e,a,n){a.admin_menu.tweak_tabs&&(a=$(e).find("ul.tabs.primary"),n.find("#admin-menu-wrapper > ul").eq(1).append(a.find("li").addClass("admin-menu-tab")),$(e).find("ul.tabs.secondary").appendTo("#admin-menu-wrapper > ul > li.admin-menu-tab.active").removeClass("secondary"),a.remove())},Drupal.admin.behaviors.replacements=function(e,a,n){for(var i in a.admin_menu.replacements)$(i,n).html(a.admin_menu.replacements[i])},Drupal.admin.behaviors.destination=function(e,a,n){a.admin_menu.destination&&$("a.admin-menu-destination",n).each(function(){this.search+=(this.search.length?"&":"?")+Drupal.settings.admin_menu.destination})},Drupal.admin.behaviors.hover=function(e,a,n){$("li.expandable",n).hover(function(){clearTimeout(this.sfTimer),$("> ul",this).addClass("active")},function(){var e=$("> ul",this);this.sfTimer=setTimeout(function(){e.removeClass("active")},400)})},Drupal.admin.behaviors.search=function(e,a,n){var i,t=$("input.admin-menu-search",n),s=t.val(),r=$("<div />").insertAfter(t);r.delegate("li","mouseenter mouseleave focus blur",function(e){var a=$(this),e="mouseenter"===e.type||"focusin"===e.type;a.trigger(e?"showPath":"hidePath",[this])}),r.delegate("li","click",function(e,a){$(this).data("original-link").trigger("mouseleave"),t.val("").trigger("keyup")}),n.delegate(".admin-menu-search-results li","showPath hidePath",function(e,a){a&&(a=$(a).data("original-link"),e="showPath"===e.type,a.toggleClass("highlight",e),a.trigger(e?"mouseenter":"mouseleave"))}),t.bind("keyup search",function(){var t,a,e=$(this).val();e!==s&&(s=e,!i&&2<=s.length&&(e=n.find("li:not(.admin-menu-action, .admin-menu-action li) > a"),i=e.map(function(){var e=this.textContent||this.innerText;if(void 0!==e)return{text:e,textMatch:e.toLowerCase(),element:this}})),s.length<2&&r.empty(),2<=s.length)&&i&&(e=i,a=s.toLowerCase(),e=e=$.grep(e,function(e){return-1!==e.textMatch.indexOf(a)}),t=$('<ul class="dropdown admin-menu-search-results" />'),$.each(e,function(){var e=this.text,a=$(this.element),n=a.closest("#admin-menu-wrapper > ul > li"),i=n.find("> a").text(),n=(n.length&&i&&(e=i+": "+e),$('<li><a href="'+a.attr("href")+'">'+e+"</a></li>"));n.data("original-link",$(this.element).parent()),t.append(n)}),e=t,r.empty().append(e))})}}(jQuery);